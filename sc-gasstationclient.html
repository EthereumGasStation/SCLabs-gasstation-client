<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../polymer/lib/mixins/gesture-event-listeners.html">

<script src="./utility.js"></script>
<!-- <script src="keythereum.js"></script> -->
<script src="../web3/dist/web3.min.js"></script>
<script src="../browser-builds/dist/ethereumjs-tx.js"></script>

<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../iron-pages/iron-pages.html">
<link rel="import" href="../iron-selector/iron-selector.html">
<link rel="import" href="./shared-styles.html">

<dom-module id="sc-gasstationclient">
  <template>
  <style include="shared-styles">
  :host {
    display: block;
    background-color: var(--sc-grey1);
    padding: 40px;
  }
  .balances {
    @apply --layout-horizontal;
    @apply --layout-center-justified;
    @apply(--layout-center);
    margin-bottom: 40px;
  }
  .header {
    width: 100%;
    @apply --layout-vertical;
    @apply --layout-end;
  }
  .vertical {
    @apply --layout-vertical;
    @apply --layout-center-center;
    margin-bottom: 40px;
  }
  .balance_single {
    background-color: var(--sc-yellow);
    @apply --layout-vertical;
    @apply --layout-center-center;
    width: 100px;
    overflow: hidden;
    border-radius: 50%;
    width: 120px;
    height: 120px;
    min-width: 120px;
    min-height: 120px;
  }
  .address {
    text-align: center;
    font-weight: bold;
    text-overflow: ellipsis;
    overflow: hidden;
    height: 1.2em;
    white-space: nowrap;
  }
  .spacer {
    width: 30px;
    text-align: center;
    color: var(--sc-lightgray);
    font-size: 26px;
  }
  .close {
    width: 20px;
    height: 20px;
    background: url('./images/swarm-city-sprite.png') -60px -84px;
    cursor: pointer;
  }
  .refresh {
        width: 54px;
        height: 54px;
        background: url('../../../images/SwarmCIty-Sprite-normal.png') -162px -54px;
        cursor: pointer;
  }
  .big {
    width: 80px;
    height: 80px;
    min-width: 80px;
    min-height: 80px;
    overflow: hidden;
    border-radius: 50%;
    text-align: center;
  }
  .big img {
    width: 82px;
    height: 82px;
    min-width: 82px;
    min-height: 82px;
    margin: -1px 0px 0px -1px;
    text-align: center;
  }
  .container {
    margin-top: 20px;
    @apply --layout-vertical;
    @apply --layout-center-center;
  }
  h1 {
    @apply --body-default-wide;
    text-align: center;
  }
  p {
    @apply --body-default;
    text-align: center;
  }
  div {
    @apply --body-default;
    text-align: center;
  }
  .balance {
    @apply --body-default-wide;
    font-size: 26px;
    margin-bottom: 5px;
  }
  .btn {
    @apply --small-light;
    text-align: center;
    width: 275px;
    height: 72px;
    line-height: 30px;
    text-align: center;
    display: block;
    border: none;
    font-size: 18px;
    cursor: pointer;
    box-sizing: border-box;
    padding: 20px;
    color: var(--sc-white);
    background-color: var(--sc-blue);
    box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.5);
    -o-box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.5);
    -webkit-box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    margin: 10px auto 0;
    font-weight: bold;
    text-align: center;
  }
  .gasbtn {
    @apply --small-light;
    text-align: center;
    width: 275px;
    height: 72px;
    line-height: 30px;
    text-align: center;
    display: block;
    border: none;
    font-size: 18px;
    cursor: pointer;
    box-sizing: border-box;
    padding: 20px;
    color: var(--sc-blue);
    background-color: var(--sc-white);
    box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.5);
    -o-box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.5);
    -webkit-box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    margin: 10px auto 0;
    font-weight: bold;
    text-align: center;
  }
  .forswt {
    font-weight: lighter;
  }
  #selector > .iron-selected {
    background-color: var(--sc-blue);
    color: var(--sc-white);
  }
  </style>
  <template is="dom-if" if="{{gasstationready}}">

    <div class="header">
      <div class="close" on-click="_close"></div>
    </div>
    <div class="container">
      <div class="vertical">
        <div class="big">
          <img src="data:image/png;base64,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" />
        </div>
        <h1>Gas Station</h1>
      </div>
      <iron-pages selected="{{selectedpage}}">
        <!-- page 0 -->
        <div>
          <div>{{project}} is built on top of the Ethereum blockchain. For every transaction, a small fee called "gas" is paid to the miners who make sure the blockchain is running perfectly. Gas makes Swarm City transactions go.</div>
          <div>&nbsp;</div>
          <div>Balances for current address: </div>
          <div class="address">[[address]]</div>
          <p>&nbsp;</p>
          <div class="balances">
            <div class="balance_single"><div class="balance">[[tokenbalance]]</div><div>{{short}}</div></div>
            <div class="spacer"></div>
            <div class="balance_single"><div class="balance">[[ethbalance]]</div><div>ETH</div></div>
          </div>
          <div class="btn" on-click="toStation">Get more gas</div>
        </div>

        <!-- page 1 -->
        <div>
          <p>How many deals would you like to do?</p>
          <p>&nbsp;</p>
          <div>
            <iron-selector
            id="selector"
            attr-for-selected="name"
            on-iron-select="doSomething"
            selected-item="{{selecteditem}}">
              <div class="gasbtn" name="1">1 &nbsp;<span class="forswt">for {{formatbalance(pricefor1)}} {{short}}</span></div>
              <div class="gasbtn" name="10">10&nbsp;<span class="forswt">for {{formatbalance(pricefor10)}} {{short}}</span></div>
              <div class="gasbtn" name="20">20&nbsp;<span class="forswt">for {{formatbalance(pricefor20)}} {{short}}</span></div>
              <div class="gasbtn" name="50">50&nbsp;<span class="forswt">for {{formatbalance(pricefor50)}} {{short}}</span></div>
            </iron-selector>
          </div>
        <div class="btn" on-click="toPersonalizedoffer">Continue ></div>

        <!-- <h1>Our best offer:</h1>
        <div><pre>[[getPriceResult_pre]]</pre></div> -->
        <!-- <div on-tap="fillUp"><b>Fill her up</b></div> -->
      </div>

      <!-- page personalizedoffer -->
      <div>
        <div>
          <p>This offer is only valid for your public key, and limited to the next 5 blocks.</p>
          <p>&nbsp;</p>
          <div class="balances">
            <div class="balance_single"><div class="balance">[[formatbalance(swtamount)]]</div><div>{{short}}</div></div>
            <div class="spacer">=</div>
            <!-- <div class="balance_single"><div class="balance">[[nrofdeals]]</div><div>DEALS</div></div>
            <div class="spacer">=</div> -->
            <div class="balance_single"><div class="balance">[[weiamount]]</div><div>ETH</div></div>
          </div>

        </div>
        <p>&nbsp;</p>

        <div class="btn" on-click="fillUp">Fill it up!</div>

      </div>

      <!-- page 3 -->
      <div>
        <p>Filling now</p>
        <h1>{{fillingbalance}} / {{swtdisplay}} SWT</h1>
        <div><pre>[[fillUpResult_pre]]</pre></div>
        <div id="balancesview" hidden>
          <p>&nbsp;</p>
          <div class="balances">
            <div class="balance_single"><div class="balance">[[ethbalance]]</div><div>ETH</div></div>
            <div class="spacer"></div>
            <div class="balance_single"><div class="balance">[[tokenbalance]]</div><div>{{short}}</div></div>
          </div>
          <div class="balances">
            <div class="refresh" on-click="getBalances"></div>
          </div>
          <p>&nbsp;</p>
          <div class="btn" on-click="toEnd">Continue</div>
        </div>
      </div>

      <!-- page 4 -->
      <div>
        <h1>Set up automatic refills</h1>
        <p>Your gas balance can be automatically refilled when needed.</p>
        <p>&nbsp;</p>
        <input type="checkbox" name="autofill" value=""> Automatically fill up my gas tank
        <p>&nbsp;</p>
        <div class="btn" on-click="exitStation">Exit Gas Station</div>
      </div>

      <!-- Page 5: found private key, doing stuff with it. -->
      <div>
        <h1>Found a keypair.</h1>
        <p>Trying to get your account working now...</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <div class="btn" on-click="makeReady">Retry</div>
      </div>
    </iron-pages>
  </div>

</template>

<template is="dom-if" if="{{!gasstationready}}">
  <div class="container">
    <div class="vertical">
      <div class="big">
        <img src="data:image/png;base64,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" />
      </div>
      <h1>Gas Station</h1>
      <p>&nbsp;</p>
      <p><b>Could not find a valid wallet.</b></p>
      <p>Gas Station could not find a valid wallet. Follow the instructions to set up your wallet to see this amazing component in action.</p>
      <p>&nbsp;</p>
      <div class="refresh" on-click="makeReady"></div>
    </div>
  </div>
</template>
</template>

<script>
/**
* `sc-gasstationclient`
*
*
* @customElement
* @polymer
* @demo demo/index.html
*/
class ScGasstationclient extends Polymer.Element {
  static get is() { return 'sc-gasstationclient'; }
  static get properties() {
    return {
      utility: {
        type: Object,
        value: function(){
          return window.utility();
        }
      },
      keythereum: {
        type: Object,
        value: function(){
          return window.keythereum;
        }
      },
      gasstationready: {
        type: Boolean,
        value: false
      },
      project: {
        type: String,
        value: 'Swarm City'
      },
      short: {
        type: String,
        value: 'SWT'
      },
      selectedpage: {
        type: Number,
        value: 0
      },
      ethbalance: {
        type: Number,
        value: 0
      },
      tokenbalance: {
        type: Number,
        value: 0
      },
      currentprice: {
        type: Number,
        value: 0
      },
      erc20: {
        type: String
      },
      privatekey: {
        type: String,
        value: 'a15819f2962ee88d45053be156f37a2678693f4cf59b2b88bcd3da832bc87d3c',
        observer: 'makeReady'
      },
      fillingbalance: {
        type: Number,
        value: 0
      },
      swtamount: {
        type: Number,
        value: 0.00
      },
      gasstation: {
        type: Object,
        value: {}
      },
      minimetoken: {
        type: Object,
        value: {}
      },
      apiendpoint: {
        type: String,
      },
      ethnode: {
        type: String
      }
    };
  }

  toStation() {
    console.log('to station');
    this.selectedpage = 1;
  }

  toPersonalizedoffer() {


    var self = this;

    var data = {
      take: this.weineeded * parseInt(this.selecteditem.attributes['name'].value),
      from : this.address,
      tokenaddress: this.erc20,
    };

    // send the TX to the backend
    var xhr = new XMLHttpRequest();
    xhr.open("POST", self.apiendpoint + '/sign', true);
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.onreadystatechange = function() {
      if (xhr.readyState == XMLHttpRequest.DONE && xhr.status == 200) {
        console.log(xhr);
        const json = JSON.parse(xhr.responseText);

        self.signresult = json;

        self.swtamount = json.give / 1e18; //self.signresult self.pricefor1 * self.nrofdeals;
        //self.swtamount = Math.floor(self.swtamount.toFixed(4));
        //self.swtdisplay = self.swtamount / 1e18;
        self.selectedpage = 2;
        self.weiamount = ((self.weineeded * self.nrofdeals) / 1e18).toFixed(4);
//debugger;
      }
    }
    xhr.send(JSON.stringify(data));

  }

  toEnd() {
    this.selectedpage = 4;
  }

  exitStation() {
    this.selectedpage = 0;
  }

  doSomething() {
    var x = this.selecteditem.getAttribute("name");
    console.log('something was selected, ', x);
    this.nrofdeals = x;
  }

  _close() {
    alert('In Swarm City, this close icon would take you back');
  }

  getPrice() {

    return new Promise((resolve, reject) => {
      // Load the translations.json file
      const xobj = new XMLHttpRequest();
      xobj.overrideMimeType('application/json');
      xobj.open('GET', this.apiendpoint + '/price?from=' + this.address+'&tokenaddress=' + this.erc20, true);
      xobj.onreadystatechange = () => {
        if (xobj.readyState == 4 && xobj.status == '200') {
          // Parse the response
          const json = JSON.parse(xobj.responseText);
          this.getPriceResult = json;
          this.getPriceResult_pre = JSON.stringify(json, null, 2);
          // this.currentprice = wei for 1 swt
          this.currentprice = this.getPriceResult.price;

          this.gasPrice = this.getPriceResult.gasprice;

          this.weineeded = 400000 * this.gasPrice;

          this.amountswtpertx = Math.ceil(this.weineeded * 1e18 / this.currentprice);
          
          //this.swtneeded = this.weineeded / this.currentprice;
          this.pricefor1 = this.amountswtpertx / 1e18;
          this.pricefor10 = this.amountswtpertx * 10 / 1e18;
          this.pricefor20 = this.amountswtpertx * 20 / 1e18;
          this.pricefor50 = this.amountswtpertx * 50 / 1e18;
          this.pricefor100 = this.amountswtpertx * 100 / 1e18;

          this.showfill = true;
          resolve();
        }
      };
      xobj.send(null);
    });
  }

  formatbalance(b){
    if (!b || b <= 0) return 0;
    return(b.toFixed(4));
  }

  getBalances() {
    // Get the current SWT and ETH balances
    var self = this;
    var minime = this.web3.eth.contract(this.minimetoken.abi);
    var minimeInstance = minime.at(this.erc20);
    minimeInstance.balanceOf(this.address, function(err, res) {
      if (!err) {
        console.log('SWT balance of client\'s account (',self.address,') is', res.toFormat(2));
        var tokenshit = res / 1e18;
        self.tokenbalance = tokenshit.toFixed(4);

        self.web3.eth.getBalance(self.address, function(err, res) {
          console.log('ETH balance of client\'s account (',self.address,') is', res.toString(10));
          self.ethbalance = (res/ 1e18).toFixed(4);
        });
        //self.gasstationready = true;
      }
    });
  }

  showbalances() {
    var self = this;
    // animation to open up the balances view and check the current balance.
    setTimeout(function() {
      //your code to be executed after 1 second
      self.shadowRoot.querySelector('#balancesview').hidden = false;
    }, 1000);
  }

  fillUp() {

    this.selectedpage = 3;
    var audio = new Audio('../images/done.m4a');
    //this.swtamount = 1.00;
    var amounttoget = this.swtamount / 1e18;

    var self = this;
    var now = 0;

    var x = setInterval(function() {
      now = now + 0.0001;
      //audio.play();
      self.fillingbalance = now.toFixed(4);

      // If the count down is finished, write some text
      if (now >= amounttoget) {
        //audio.play();
        clearInterval(x);
        self.fillingbalance = self.swtdisplay;
        self.showbalances();
      }
    }, 5);



    var minime = this.web3.eth.contract(this.minimetoken.abi);
    var minimeInstance = minime.at(this.signresult.token_address);

    // minimeInstance.balanceOf(this.address, function(err, res) {
    //   console.log('SWT balance is', res.toFormat(2));
    //   self.tokenbalance = res;
    // });

    console.log('sending approval for ', this.signresult.give , 'to', this.signresult.to);

    var txData = minimeInstance.approve.getData(this.signresult.to, this.signresult.give);

    this.web3.eth.estimateGas({
      to: this.signresult.to,
      data: txData,
      from: self.address
    }, function(err, res) {
      if (err) {
        console.log(err);
      }
      console.log('gas required=',res,typeof res);
      var gasRequired = res;

      // get nonce
      self.web3.eth.getTransactionCount(self.address, function(err, nonce) {

        if (!nonce) {
          console.log('nonce of address', self.address, 'is undefined...');
          nonce = 0;
        }

        console.log('nonce of address', self.address, 'is', nonce);

        var txParams = {
          nonce: nonce++,
          gasPrice: self.gasPrice,
          gasLimit: gasRequired + 50000,
          to: self.signresult.token_address,
          from: self.address,
          data: txData,
          chainId: 1
        };

        console.log('TX1 params' , txParams);

        var tx = new EthJS.Tx(txParams);
        tx.sign(self.privatekey_buffer);
        var serializedTx = tx.serialize(); //.toString('hex');

        var tx1 = EthJS.Util.addHexPrefix(serializedTx.toString('hex'));

        console.log('tx1');
        console.log(txParams);
        console.log(tx1);

        var gasstation = self.web3.eth.contract(self.gasstation.abi);
        self.gasstationInstance = gasstation.at(self.signresult.to);


    minimeInstance.balanceOf(self.address, function(err, res) {
      var pong = res/1e18;
      console.log('my SWT balance is', pong.toFixed(18));
      //var tospend = self.swtamount * self.signresult.price;
      
        console.log('I will send ', self.signresult.give, ' SWT units to receive ' , self.signresult.take , ' ETH units');
    });

        txData = self.gasstationInstance.fillup.getData(
          self.signresult.token_address,
          self.signresult.valid_until,
          self.signresult.random,
          self.signresult.take,
          self.signresult.give,
          self.signresult.sig.v,
          self.signresult.sig.r,
          self.signresult.sig.s);
//debugger;
        txParams = {
          nonce: nonce++,
          gasPrice: self.gasPrice,
          gasLimit: 200000,
          from: self.address,
          to: self.signresult.to,
          data: txData,
          chainId: 1
        };

        var tx2 = new EthJS.Tx(txParams);
        tx2.sign(self.privatekey_buffer);
        serializedTx = tx2.serialize();

        var tx2 = EthJS.Util.addHexPrefix(serializedTx.toString('hex'));

        console.log('tx2');
        console.log(txParams);
        console.log(tx2);

        var res = {
          tx1: tx1,
          tx2: tx2
        };

        // send the TX to the backend
        var xhr = new XMLHttpRequest();
        xhr.open("POST", self.apiendpoint + '/fillup', true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function() {
          if (xhr.readyState == XMLHttpRequest.DONE && xhr.status == 200) {
            console.log(xhr);
          }
        }
        xhr.send(JSON.stringify(res));


      });
    });


  }

  gettankbalance() {
    var minime = this.web3.eth.contract(this.minimetoken.abi);
    var minimeInstance = minime.at(this.erc20);
    var self = this;
    minimeInstance.balanceOf(this.getPriceResult.to, function(err, res) {
      if (!err) {
        console.log('GT balance at '+self.getPriceResult.to+'is', res.toFormat(2));
        //self.tokenbalance = res;
      }
    });
  }

  ready() {
    super.ready();
  }

  makeReady() {

        var self = this;

        this.web3 = new Web3(new Web3.providers.HttpProvider(this.ethnode));

        // this.tokenamount = 1;
        // this.gasPrice = 2 * 1e9; // 2 GWei

        this.address = EthJS.Util.addHexPrefix(EthJS.Util.privateToAddress(EthJS.Util.addHexPrefix(this.privatekey)).toString('hex'));

        this.privatekey_buffer = new EthJS.Buffer.Buffer(this.privatekey, "hex");

        // Get the minime and token abi
        var minimetokenabi;
        var gassstationabi;

        self.getPrice().then(function(){

        //self.erc20 = "0xd2444365f33079be7160b7052cf544594c137e3d";

        // Get abis
        return new Promise((resolve, reject) => {
          // Load the translations.json file
          const xobj = new XMLHttpRequest();
          xobj.overrideMimeType('application/json');
          xobj.open('GET', self.apiendpoint + '/abi', true);
          xobj.onreadystatechange = () => {
            if (xobj.readyState == 4 && xobj.status == '200') {
              // Parse the response
              const json = JSON.parse(xobj.responseText);
              console.log(json);
              //return json;
              self.minimetoken.abi = json.erc20;
              self.gasstation.abi = json.gasstation;
              var minime = self.web3.eth.contract(json.erc20);
              var minimeInstance = minime.at(self.erc20);
              minimeInstance.balanceOf(self.address, function(err, res) {
                if (!err) {
                  console.log('SWT balance of client\'s account (',self.address,') is', res.toFormat(2));
                  var tokenshit = res / 1e18;
                  self.tokenbalance = tokenshit.toFixed(2);

                  self.web3.eth.getBalance(self.address, function(err, res) {
                    console.log('ETH balance of client\'s account (',self.address,') is', res.toString(10));
                    self.ethbalance = (res/ 1e18).toFixed(2);
                  });
                  self.gasstationready = true;
                }
              });

              resolve();
            }
          };
          xobj.send(null);
        });

      });

        // End getting minime and token abi

  }
}

window.customElements.define(ScGasstationclient.is, ScGasstationclient);
</script>
</dom-module>
